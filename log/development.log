

Started GET "/funds" for 127.0.0.1 at 2018-07-17 11:28:36 -0700

Mysql2::Error - Unknown database 'Peatio1_development':
  mysql2 (0.3.21) lib/mysql2/client.rb:70:in `initialize'
  activerecord (4.0.12) lib/active_record/connection_adapters/mysql2_adapter.rb:18:in `mysql2_connection'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:440:in `new_connection'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:450:in `checkout_new_connection'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:421:in `acquire_connection'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:356:in `block in checkout'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:265:in `block in connection'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:264:in `connection'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:546:in `retrieve_connection'
  activerecord (4.0.12) lib/active_record/connection_handling.rb:79:in `retrieve_connection'
  activerecord (4.0.12) lib/active_record/connection_handling.rb:53:in `connection'
  activerecord (4.0.12) lib/active_record/migration.rb:796:in `current_version'
  activerecord (4.0.12) lib/active_record/migration.rb:804:in `needs_migration?'
  activerecord (4.0.12) lib/active_record/migration.rb:383:in `check_pending!'
  activerecord (4.0.12) lib/active_record/migration.rb:370:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.12) lib/active_support/callbacks.rb:373:in `_run__1057720422765991632__call__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.12) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  lib/middleware/security.rb:11:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/static.rb:84:in `call'
  lib/middleware/i18n_js.rb:9:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.12) lib/rails/engine.rb:511:in `call'
  railties (4.0.12) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started POST "/__better_errors/56055460/variables" for 127.0.0.1 at 2018-07-17 11:28:36 -0700


Started GET "/funds" for 127.0.0.1 at 2018-07-17 11:29:14 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Private::FundsController#index as HTML
  [1m[35mMember Load (0.3ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.7ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-16 11:29:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-16 11:29:15')[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1
  [1m[36mIdDocument Load (0.2ms)[0m  [1mSELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1
  [1m[36mTwoFactor Load (0.5ms)[0m  [1mSELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::App' LIMIT 1[0m
  [1m[35mTwoFactor Load (0.4ms)[0m  SELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::Sms' LIMIT 1
  [1m[36mDeposit Load (0.4ms)[0m  [1mSELECT `deposits`.* FROM `deposits` WHERE `deposits`.`member_id` = 1[0m
  [1m[35mAccount Load (1.0ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1 AND (currency in (1,2,3,4,5,6,7,8,9))
  [1m[36mPaymentAddress Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 1 LIMIT 1[0m
  [1m[35mFundSource Load (0.3ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 1 LIMIT 1
  [1m[36mPaymentAddress Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mFundSource Load (0.3ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 4 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.2ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 LIMIT 1
  [1m[36mPaymentAddress Load (0.6ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mFundSource Load (0.3ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 2 LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 15 LIMIT 1[0m
  [1m[35mFundSource Load (0.3ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 3 LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.4ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mWithdraw Load (0.3ms)[0m  [1mSELECT `withdraws`.* FROM `withdraws` WHERE `withdraws`.`member_id` = 1[0m
  [1m[35mFundSource Load (0.3ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`member_id` = 1
  Rendered private/funds/index.html.erb within layouts/funds (8.1ms)
  Rendered shared/_html5.html.slim (57.2ms)
  Rendered shared/_meta.html.slim (4.3ms)
  [1m[36mTicket Load (0.4ms)[0m  [1mSELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'  [["author_id", 1]]
  Rendered shared/_header_profile_setting.html.slim (31.3ms)
  Rendered shared/_header_lang_sel.html.slim (5.5ms)
  Rendered shared/_header.html.slim (48.6ms)
  Rendered shared/_footer.html.slim (5.5ms)
Completed 200 OK in 1869ms (Views: 1313.2ms | ActiveRecord: 30.1ms)


Started POST "/funds/gen_address" for 127.0.0.1 at 2018-07-17 11:29:19 -0700
Processing by Private::FundsController#gen_address as */*
  [1m[36mMember Load (0.5ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1
  [1m[36mIdDocument Load (0.3ms)[0m  [1mSELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`id` = 19 LIMIT 1[0m
Completed 500 Internal Server Error in 194ms

Bunny::TCPConnectionFailed - Could not establish TCP connection to 127.0.0.1:5672: :
  bunny (1.2.1) lib/bunny/transport.rb:247:in `rescue in initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:241:in `initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:254:in `maybe_initialize_socket'
  bunny (1.2.1) lib/bunny/session.rb:245:in `start'
  app/models/amqp_queue.rb:6:in `block in connection'
  app/models/amqp_queue.rb:5:in `connection'
  app/models/amqp_queue.rb:11:in `channel'
  app/models/amqp_queue.rb:15:in `exchanges'
  app/models/amqp_queue.rb:19:in `exchange'
  app/models/amqp_queue.rb:24:in `publish'
  app/models/amqp_queue.rb:32:in `enqueue'
  app/models/payment_address.rb:16:in `gen_address'
  app/controllers/private/funds_controller.rb:31:in `block in gen_address'
  activerecord (4.0.12) lib/active_record/relation/delegation.rb:13:in `each'
  app/controllers/private/funds_controller.rb:23:in `gen_address'
  actionpack (4.0.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.12) lib/active_support/callbacks.rb:503:in `_run__2418827215184620016__process_action__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.0.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.12) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.12) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:676:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-identity (1.1.1) lib/omniauth/strategies/identity.rb:43:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/app_request_handler.rb:13:in `call'
  rack-contrib (1.1.0) lib/rack/contrib/response_headers.rb:17:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/headers.rb:16:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
  http_accept_language (2.0.1) lib/http_accept_language/middleware.rb:13:in `call'
  simple_captcha2 (0.2.2) lib/simple_captcha/middleware.rb:20:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.12) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.12) lib/active_record/migration.rb:373:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.12) lib/active_support/callbacks.rb:373:in `_run__1424942762654513584__call__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.12) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  lib/middleware/security.rb:11:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/static.rb:84:in `call'
  lib/middleware/i18n_js.rb:9:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.12) lib/rails/engine.rb:511:in `call'
  railties (4.0.12) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/funds" for 127.0.0.1 at 2018-07-17 11:34:04 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Private::FundsController#index as HTML
  [1m[35mMember Load (0.3ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.8ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.9ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.7ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-16 11:34:04')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-16 11:34:04')[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1
  [1m[36mIdDocument Load (0.4ms)[0m  [1mSELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1
  [1m[36mTwoFactor Load (0.4ms)[0m  [1mSELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::App' LIMIT 1[0m
  [1m[35mTwoFactor Load (0.4ms)[0m  SELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::Sms' LIMIT 1
  [1m[36mDeposit Load (0.4ms)[0m  [1mSELECT `deposits`.* FROM `deposits` WHERE `deposits`.`member_id` = 1[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1 AND (currency in (1,2,3,4,5,6,7,8,9))
  [1m[36mPaymentAddress Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 1 LIMIT 1[0m
  [1m[35mFundSource Load (0.3ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 1 LIMIT 1
  [1m[36mPaymentAddress Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mFundSource Load (0.3ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 4 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.2ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 LIMIT 1
  [1m[36mPaymentAddress Load (0.6ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 LIMIT 1
  [1m[36mPaymentAddress Load (0.2ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mFundSource Load (0.3ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 2 LIMIT 1
  [1m[36mPaymentAddress Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 15 LIMIT 1[0m
  [1m[35mFundSource Load (0.2ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 3 LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.5ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mWithdraw Load (0.4ms)[0m  [1mSELECT `withdraws`.* FROM `withdraws` WHERE `withdraws`.`member_id` = 1[0m
  [1m[35mFundSource Load (0.4ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`member_id` = 1
  Rendered private/funds/index.html.erb within layouts/funds (2.7ms)
  Rendered shared/_html5.html.slim (25.7ms)
  Rendered shared/_meta.html.slim (4.4ms)
  [1m[36mTicket Load (0.4ms)[0m  [1mSELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'  [["author_id", 1]]
  Rendered shared/_header_profile_setting.html.slim (27.8ms)
  Rendered shared/_header_lang_sel.html.slim (6.4ms)
  Rendered shared/_header.html.slim (45.4ms)
  Rendered shared/_footer.html.slim (5.9ms)
Completed 200 OK in 855ms (Views: 402.8ms | ActiveRecord: 29.2ms)


Started POST "/funds/gen_address" for 127.0.0.1 at 2018-07-17 11:34:07 -0700
Processing by Private::FundsController#gen_address as */*
  [1m[36mMember Load (0.4ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.7ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.8ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.7ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.8ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-16 11:34:07')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-16 11:34:07')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-16 11:34:07')
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1[0m
  [1m[35mIdDocument Load (0.3ms)[0m  SELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16
  [1m[36mPaymentAddress Load (0.2ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`id` = 19 LIMIT 1
Completed 500 Internal Server Error in 148ms

Bunny::TCPConnectionFailed - Could not establish TCP connection to 127.0.0.1:5672: :
  bunny (1.2.1) lib/bunny/transport.rb:247:in `rescue in initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:241:in `initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:254:in `maybe_initialize_socket'
  bunny (1.2.1) lib/bunny/session.rb:245:in `start'
  app/models/amqp_queue.rb:6:in `block in connection'
  app/models/amqp_queue.rb:5:in `connection'
  app/models/amqp_queue.rb:11:in `channel'
  app/models/amqp_queue.rb:15:in `exchanges'
  app/models/amqp_queue.rb:19:in `exchange'
  app/models/amqp_queue.rb:24:in `publish'
  app/models/amqp_queue.rb:32:in `enqueue'
  app/models/payment_address.rb:16:in `gen_address'
  app/controllers/private/funds_controller.rb:31:in `block in gen_address'
  activerecord (4.0.12) lib/active_record/relation/delegation.rb:13:in `each'
  app/controllers/private/funds_controller.rb:23:in `gen_address'
  actionpack (4.0.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.12) lib/active_support/callbacks.rb:503:in `_run__915112090709520816__process_action__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.0.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.12) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.12) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:676:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-identity (1.1.1) lib/omniauth/strategies/identity.rb:43:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/app_request_handler.rb:13:in `call'
  rack-contrib (1.1.0) lib/rack/contrib/response_headers.rb:17:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/headers.rb:16:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
  http_accept_language (2.0.1) lib/http_accept_language/middleware.rb:13:in `call'
  simple_captcha2 (0.2.2) lib/simple_captcha/middleware.rb:20:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.12) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.12) lib/active_record/migration.rb:373:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.12) lib/active_support/callbacks.rb:373:in `_run__2624994499998217000__call__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.12) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  lib/middleware/security.rb:11:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/static.rb:84:in `call'
  lib/middleware/i18n_js.rb:9:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.12) lib/rails/engine.rb:511:in `call'
  railties (4.0.12) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/funds" for 127.0.0.1 at 2018-07-17 11:34:15 -0700
Processing by Private::FundsController#index as HTML
  [1m[36mMember Load (0.5ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-16 11:34:15')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-16 11:34:15')[0m
  [1m[35m (0.7ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-16 11:34:15')
  [1m[36mAccount Load (0.6ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1[0m
  [1m[35mIdDocument Load (0.3ms)[0m  SELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1[0m
  [1m[35mTwoFactor Load (0.3ms)[0m  SELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::App' LIMIT 1
  [1m[36mTwoFactor Load (0.3ms)[0m  [1mSELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::Sms' LIMIT 1[0m
  [1m[35mDeposit Load (0.6ms)[0m  SELECT `deposits`.* FROM `deposits` WHERE `deposits`.`member_id` = 1
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1 AND (currency in (1,2,3,4,5,6,7,8,9))[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 1 LIMIT 1
  [1m[36mFundSource Load (0.3ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 1 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.2ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mFundSource Load (0.2ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 4 LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mFundSource Load (0.4ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 2 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 15 LIMIT 1
  [1m[36mFundSource Load (0.2ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 3 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.2ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.6ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.5ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 LIMIT 1
  [1m[36mPaymentAddress Load (0.5ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.5ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mWithdraw Load (0.3ms)[0m  SELECT `withdraws`.* FROM `withdraws` WHERE `withdraws`.`member_id` = 1
  [1m[36mFundSource Load (0.3ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`member_id` = 1[0m
  Rendered private/funds/index.html.erb within layouts/funds (0.4ms)
  Rendered shared/_html5.html.slim (1.4ms)
  Rendered shared/_meta.html.slim (0.4ms)
  [1m[35mTicket Load (0.4ms)[0m  SELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'[0m  [["author_id", 1]]
  Rendered shared/_header_profile_setting.html.slim (4.1ms)
  Rendered shared/_header_lang_sel.html.slim (0.1ms)
  Rendered shared/_header.html.slim (7.8ms)
  Rendered shared/_footer.html.slim (0.0ms)
Completed 200 OK in 283ms (Views: 72.5ms | ActiveRecord: 18.0ms)


Started POST "/funds/gen_address" for 127.0.0.1 at 2018-07-17 11:34:17 -0700
Processing by Private::FundsController#gen_address as */*
  [1m[35mMember Load (2.8ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36mAccount Load (3.3ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1[0m
  [1m[35mIdDocument Load (0.7ms)[0m  SELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1[0m
  [1m[35mPaymentAddress Load (0.5ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2
  [1m[36mPaymentAddress Load (0.6ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3[0m
  [1m[35mPaymentAddress Load (0.5ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16
  [1m[36mPaymentAddress Load (0.5ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19[0m
  [1m[35mAccount Load (1.5ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`id` = 19 LIMIT 1
Completed 500 Internal Server Error in 89ms

Bunny::TCPConnectionFailed - Could not establish TCP connection to 127.0.0.1:5672: :
  bunny (1.2.1) lib/bunny/transport.rb:247:in `rescue in initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:241:in `initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:254:in `maybe_initialize_socket'
  bunny (1.2.1) lib/bunny/session.rb:245:in `start'
  app/models/amqp_queue.rb:6:in `block in connection'
  app/models/amqp_queue.rb:5:in `connection'
  app/models/amqp_queue.rb:11:in `channel'
  app/models/amqp_queue.rb:15:in `exchanges'
  app/models/amqp_queue.rb:19:in `exchange'
  app/models/amqp_queue.rb:24:in `publish'
  app/models/amqp_queue.rb:32:in `enqueue'
  app/models/payment_address.rb:16:in `gen_address'
  app/controllers/private/funds_controller.rb:31:in `block in gen_address'
  activerecord (4.0.12) lib/active_record/relation/delegation.rb:13:in `each'
  app/controllers/private/funds_controller.rb:23:in `gen_address'
  actionpack (4.0.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.12) lib/active_support/callbacks.rb:503:in `_run__915112090709520816__process_action__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.0.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.12) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.12) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:676:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-identity (1.1.1) lib/omniauth/strategies/identity.rb:43:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/app_request_handler.rb:13:in `call'
  rack-contrib (1.1.0) lib/rack/contrib/response_headers.rb:17:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/headers.rb:16:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
  http_accept_language (2.0.1) lib/http_accept_language/middleware.rb:13:in `call'
  simple_captcha2 (0.2.2) lib/simple_captcha/middleware.rb:20:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.12) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.12) lib/active_record/migration.rb:373:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.12) lib/active_support/callbacks.rb:373:in `_run__2624994499998217000__call__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.12) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  lib/middleware/security.rb:11:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/static.rb:84:in `call'
  lib/middleware/i18n_js.rb:9:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.12) lib/rails/engine.rb:511:in `call'
  railties (4.0.12) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/funds" for 127.0.0.1 at 2018-07-17 11:35:50 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Private::FundsController#index as HTML
  [1m[35mMember Load (0.3ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.6ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.8ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-16 11:35:51')
  [1m[36m (0.8ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-16 11:35:51')[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1
  [1m[36mIdDocument Load (0.3ms)[0m  [1mSELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1
  [1m[36mTwoFactor Load (1.2ms)[0m  [1mSELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::App' LIMIT 1[0m
  [1m[35mTwoFactor Load (0.4ms)[0m  SELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::Sms' LIMIT 1
  [1m[36mDeposit Load (0.4ms)[0m  [1mSELECT `deposits`.* FROM `deposits` WHERE `deposits`.`member_id` = 1[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1 AND (currency in (1,2,3,4,5,6,7,8,9))
  [1m[36mPaymentAddress Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 1 LIMIT 1[0m
  [1m[35mFundSource Load (0.3ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 1 LIMIT 1
  [1m[36mPaymentAddress Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.4ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mFundSource Load (0.4ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 4 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 LIMIT 1
  [1m[36mPaymentAddress Load (0.2ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mFundSource Load (0.4ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 2 LIMIT 1
  [1m[36mPaymentAddress Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 15 LIMIT 1[0m
  [1m[35mFundSource Load (0.2ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 3 LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mWithdraw Load (0.3ms)[0m  [1mSELECT `withdraws`.* FROM `withdraws` WHERE `withdraws`.`member_id` = 1[0m
  [1m[35mFundSource Load (0.7ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`member_id` = 1
  Rendered private/funds/index.html.erb within layouts/funds (2.6ms)
  Rendered shared/_html5.html.slim (27.4ms)
  Rendered shared/_meta.html.slim (4.5ms)
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'  [["author_id", 1]]
  Rendered shared/_header_profile_setting.html.slim (27.5ms)
  Rendered shared/_header_lang_sel.html.slim (6.2ms)
  Rendered shared/_header.html.slim (43.6ms)
  Rendered shared/_footer.html.slim (8.0ms)
Completed 200 OK in 877ms (Views: 445.0ms | ActiveRecord: 31.4ms)


Started POST "/funds/gen_address" for 127.0.0.1 at 2018-07-17 11:35:52 -0700
Processing by Private::FundsController#gen_address as */*
  [1m[36mMember Load (0.7ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1
  [1m[36mIdDocument Load (0.3ms)[0m  [1mSELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1
  [1m[36mPaymentAddress Load (0.2ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`id` = 19 LIMIT 1[0m
Completed 500 Internal Server Error in 91ms

Bunny::TCPConnectionFailed - Could not establish TCP connection to 127.0.0.1:5672: :
  bunny (1.2.1) lib/bunny/transport.rb:247:in `rescue in initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:241:in `initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:254:in `maybe_initialize_socket'
  bunny (1.2.1) lib/bunny/session.rb:245:in `start'
  app/models/amqp_queue.rb:6:in `block in connection'
  app/models/amqp_queue.rb:5:in `connection'
  app/models/amqp_queue.rb:11:in `channel'
  app/models/amqp_queue.rb:15:in `exchanges'
  app/models/amqp_queue.rb:19:in `exchange'
  app/models/amqp_queue.rb:24:in `publish'
  app/models/amqp_queue.rb:32:in `enqueue'
  app/models/payment_address.rb:16:in `gen_address'
  app/controllers/private/funds_controller.rb:31:in `block in gen_address'
  activerecord (4.0.12) lib/active_record/relation/delegation.rb:13:in `each'
  app/controllers/private/funds_controller.rb:23:in `gen_address'
  actionpack (4.0.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.12) lib/active_support/callbacks.rb:503:in `_run__4361450742432593360__process_action__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.0.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.12) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.12) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:676:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-identity (1.1.1) lib/omniauth/strategies/identity.rb:43:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/app_request_handler.rb:13:in `call'
  rack-contrib (1.1.0) lib/rack/contrib/response_headers.rb:17:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/headers.rb:16:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
  http_accept_language (2.0.1) lib/http_accept_language/middleware.rb:13:in `call'
  simple_captcha2 (0.2.2) lib/simple_captcha/middleware.rb:20:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.12) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.12) lib/active_record/migration.rb:373:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.12) lib/active_support/callbacks.rb:373:in `_run__627039842683424577__call__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.12) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  lib/middleware/security.rb:11:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/static.rb:84:in `call'
  lib/middleware/i18n_js.rb:9:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.12) lib/rails/engine.rb:511:in `call'
  railties (4.0.12) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/funds" for 127.0.0.1 at 2018-07-17 11:35:54 -0700
Processing by Private::FundsController#index as HTML
  [1m[35mMember Load (0.5ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1[0m
  [1m[35mIdDocument Load (0.3ms)[0m  SELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1[0m
  [1m[35mTwoFactor Load (0.3ms)[0m  SELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::App' LIMIT 1
  [1m[36mTwoFactor Load (0.6ms)[0m  [1mSELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::Sms' LIMIT 1[0m
  [1m[35mDeposit Load (0.4ms)[0m  SELECT `deposits`.* FROM `deposits` WHERE `deposits`.`member_id` = 1
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1 AND (currency in (1,2,3,4,5,6,7,8,9))[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 1 LIMIT 1
  [1m[36mFundSource Load (0.3ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 1 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mFundSource Load (0.2ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 4 LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.6ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mFundSource Load (0.4ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 2 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 15 LIMIT 1
  [1m[36mFundSource Load (0.3ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 3 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.2ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.2ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 LIMIT 1
  [1m[36mPaymentAddress Load (0.2ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.2ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mWithdraw Load (0.3ms)[0m  SELECT `withdraws`.* FROM `withdraws` WHERE `withdraws`.`member_id` = 1
  [1m[36mFundSource Load (0.3ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`member_id` = 1[0m
  Rendered private/funds/index.html.erb within layouts/funds (0.4ms)
  Rendered shared/_html5.html.slim (1.2ms)
  Rendered shared/_meta.html.slim (0.4ms)
  [1m[35mTicket Load (0.3ms)[0m  SELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'[0m  [["author_id", 1]]
  Rendered shared/_header_profile_setting.html.slim (3.6ms)
  Rendered shared/_header_lang_sel.html.slim (0.1ms)
  Rendered shared/_header.html.slim (7.5ms)
  Rendered shared/_footer.html.slim (0.1ms)
Completed 200 OK in 241ms (Views: 89.7ms | ActiveRecord: 10.1ms)


Started POST "/funds/gen_address" for 127.0.0.1 at 2018-07-17 11:35:55 -0700
Processing by Private::FundsController#gen_address as */*
  [1m[35mMember Load (0.4ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36m (2.5ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.7ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.8ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.6ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.2ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-16 11:35:55')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-16 11:35:55')[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1
  [1m[36mIdDocument Load (0.3ms)[0m  [1mSELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1
  [1m[36mPaymentAddress Load (0.2ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3
  [1m[36mPaymentAddress Load (0.2ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16[0m
  [1m[35mPaymentAddress Load (0.2ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`id` = 19 LIMIT 1[0m
Completed 500 Internal Server Error in 129ms

Bunny::TCPConnectionFailed - Could not establish TCP connection to 127.0.0.1:5672: :
  bunny (1.2.1) lib/bunny/transport.rb:247:in `rescue in initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:241:in `initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:254:in `maybe_initialize_socket'
  bunny (1.2.1) lib/bunny/session.rb:245:in `start'
  app/models/amqp_queue.rb:6:in `block in connection'
  app/models/amqp_queue.rb:5:in `connection'
  app/models/amqp_queue.rb:11:in `channel'
  app/models/amqp_queue.rb:15:in `exchanges'
  app/models/amqp_queue.rb:19:in `exchange'
  app/models/amqp_queue.rb:24:in `publish'
  app/models/amqp_queue.rb:32:in `enqueue'
  app/models/payment_address.rb:16:in `gen_address'
  app/controllers/private/funds_controller.rb:31:in `block in gen_address'
  activerecord (4.0.12) lib/active_record/relation/delegation.rb:13:in `each'
  app/controllers/private/funds_controller.rb:23:in `gen_address'
  actionpack (4.0.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.12) lib/active_support/callbacks.rb:503:in `_run__4361450742432593360__process_action__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.0.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.12) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.12) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:676:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-identity (1.1.1) lib/omniauth/strategies/identity.rb:43:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/app_request_handler.rb:13:in `call'
  rack-contrib (1.1.0) lib/rack/contrib/response_headers.rb:17:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/headers.rb:16:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
  http_accept_language (2.0.1) lib/http_accept_language/middleware.rb:13:in `call'
  simple_captcha2 (0.2.2) lib/simple_captcha/middleware.rb:20:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.12) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.12) lib/active_record/migration.rb:373:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.12) lib/active_support/callbacks.rb:373:in `_run__627039842683424577__call__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.12) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  lib/middleware/security.rb:11:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/static.rb:84:in `call'
  lib/middleware/i18n_js.rb:9:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.12) lib/rails/engine.rb:511:in `call'
  railties (4.0.12) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'



Started GET "/funds" for 127.0.0.1 at 2018-07-18 17:45:24 -0700
  [1m[36mActiveRecord::SchemaMigration Load (150.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by Private::FundsController#index as HTML
  [1m[35mMember Load (9.1ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36m (22.2ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (0.6ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (92.2ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (0.7ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (1.2ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-17 17:45:25')
  [1m[36m (1.1ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-17 17:45:25')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
Redirected to http://localhost:3000/
Filter chain halted as :auth_member! rendered or redirected
Completed 302 Found in 446ms (ActiveRecord: 145.5ms)


Started GET "/" for 127.0.0.1 at 2018-07-18 17:45:25 -0700
Processing by WelcomeController#index as HTML
  [1m[36mMember Load (0.4ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  Rendered welcome/_apheader.html.slim (66.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  Rendered welcome/_mid.html.slim (7.2ms)
  Rendered welcome/_prefooter.html.slim (169.7ms)
  Rendered welcome/_footer.html.erb (0.6ms)
  Rendered welcome/index.html.slim within layouts/landing (293.0ms)
  Rendered shared/_html5.html.slim (53.8ms)
  Rendered shared/_meta.html.slim (6.2ms)
Completed 200 OK in 1960ms (Views: 1870.8ms | ActiveRecord: 0.5ms)


Started GET "/signin" for 127.0.0.1 at 2018-07-18 17:45:31 -0700
Processing by SessionsController#new as HTML
  [1m[36mMember Load (1.3ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35m (10.2ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (1.3ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (1.2ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (0.9ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (1.2ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (0.9ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (0.7ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (1.0ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (1.0ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (0.8ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-17 17:45:31')
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-17 17:45:31')[0m
  [1m[35m (0.6ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-17 17:45:31')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  Rendered sessions/new.html.slim within layouts/application (54.1ms)
  Rendered shared/_html5.html.slim (1.3ms)
  Rendered shared/_meta.html.slim (0.6ms)
  Rendered shared/_alert.html.slim (7.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  Rendered shared/_header_lang_sel.html.slim (5.3ms)
  Rendered shared/_header.html.slim (23.4ms)
  Rendered shared/_flash.slim (7.7ms)
  Rendered shared/_frame.html.slim (16.9ms)
  Rendered shared/_footer.html.slim (4.5ms)
Completed 200 OK in 885ms (Views: 344.5ms | ActiveRecord: 389.2ms)


Started POST "/auth/identity/callback" for 127.0.0.1 at 2018-07-18 17:45:34 -0700
(identity) Callback phase initiated.
  [1m[36mIdentity Load (20.6ms)[0m  [1mSELECT `identities`.* FROM `identities` WHERE `identities`.`email` = 'admin@peatio.dev' ORDER BY `identities`.`id` ASC LIMIT 1[0m
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"5bsU2y7nMoNXIjMh+jRAVbnAwcXS5J01+urOW2vY94U=", "auth_key"=>"admin@peatio.dev", "password"=>"[FILTERED]", "commit"=>"Sign In", "provider"=>"identity"}
  [1m[35mMember Load (0.3ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` IS NULL ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mAuthentication Load (6.1ms)[0m  SELECT `authentications`.* FROM `authentications` WHERE `authentications`.`provider` = 'identity' AND `authentications`.`uid` = '1' LIMIT 1
  [1m[36mMember Load (8.0ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`id` = 1 LIMIT 1[0m
  [1m[35m (7.3ms)[0m  BEGIN
  [1m[36mSQL (88.4ms)[0m  [1mINSERT INTO `signup_histories` (`accept_language`, `created_at`, `ip`, `member_id`, `ua`) VALUES ('en-US,en;q=0.9', '2018-07-18 17:45:34', '127.0.0.1', 1, 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36')[0m
  [1m[35m (129.7ms)[0m  COMMIT
Unable to enqueue :mailer: Could not establish TCP connection to 127.0.0.1:5672: , fallback to synchronous mail delivery
  [1m[36mMember Load (0.6ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`id` = 1 LIMIT 1[0m
  Rendered member_mailer/notify_signin.html.erb within layouts/mailers/application (0.7ms)

Sent mail to admin@peatio.dev (33.7ms)
Date: Wed, 18 Jul 2018 17:45:35 -0700
From: system@peatio.dev
Reply-To: support@peatio.dev
To: admin@peatio.dev
Message-ID: <5b4fdf2f55c13_19b89363de4c42954@ubuntu.mail>
Subject: [PEATIO] You have just signed in
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<html><head>
<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0" style=" background: #EEEEEE; font:14px/20px 'Helvetica', Arial, sans-serif;">
  <tbody>
  <tr>
    <td style="padding: 30px 0;"><table cellspacing="0" cellpadding="0" width="650" align="center" border="0" style="background: #FFFFFF; border-radius: 10px">
        <tbody>
        <tr>
          <td>
            <table width="100%" style="background:#3e4c5a; border-radius: 10px 10px 0 0">
              <tbody>
              <tr>
                <td width="1%" style=" padding: 10px 10px"></td>
                <td style="font-size:24px; color:#FFF; padding:10px;">PEATIO</td>
              </tr>
              </tbody>
          </table></td>
        </tr>
        <tr>
          <td style="border-top:none; padding:30px; color: #666 ">
            <!--body-->
            <table>
              <tbody>
              <tr>
                <td>
                  <p>Dear user,</p>

                  <p><p>
You have just signed in.
</p>

<p>
If it's not you, please <a href='mailto:support@peatio.dev'>contact us</a> ASAP.
</p>
</p>

                  <p>Thanks,<br/>The Peatio Team</p>
                </td>
              </tr>
              </tbody>
            </table>
            <!--body-->
          </td>
        </tr>
        </tbody>
        <tfoot>
          <tr>
            <td style="padding:0 30px 20px; font-size: 13px; color: #999">
              This is an automatically generated email, please do not reply, if you have any question, please <a href="mailto:support@peatio.dev">contact us</a>.
            </td>
          </tr>
        </tfoot>
      </table>
    </td>
  </tr>
  </tbody>
</table>
</body></html>

Redirected to http://localhost:3000/funds?
Completed 302 Found in 1019ms (ActiveRecord: 487.1ms)


Started GET "/funds" for 127.0.0.1 at 2018-07-18 17:45:35 -0700
Processing by Private::FundsController#index as HTML
  [1m[35mMember Load (0.4ms)[0m  SELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 3 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 4 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.9ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 5 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 6 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.7ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 7 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (0.9ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 8 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 9 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 10 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 11 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (0.9ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 12 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.8ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 13 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 14 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 15 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (1.1ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 16 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 17 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (0.5ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 18 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 19 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 20 AND (created_at > '2018-07-17 17:45:35')
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(`trades`.`volume`) AS sum_id FROM `trades` WHERE `trades`.`currency` = 21 AND (created_at > '2018-07-17 17:45:35')[0m
  [1m[35mAccount Load (12.4ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1
  [1m[36mIdDocument Load (1.1ms)[0m  [1mSELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1[0m
  [1m[35m (1.9ms)[0m  SELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1
  [1m[36mTwoFactor Load (0.4ms)[0m  [1mSELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::App' LIMIT 1[0m
  [1m[35mTwoFactor Load (0.7ms)[0m  SELECT `two_factors`.* FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`type` = 'TwoFactor::Sms' LIMIT 1
  [1m[36mDeposit Load (1.4ms)[0m  [1mSELECT `deposits`.* FROM `deposits` WHERE `deposits`.`member_id` = 1[0m
  [1m[35mAccount Load (1.1ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1 AND (currency in (1,2,3,4,5,6,7,8,9))
  [1m[36mPaymentAddress Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 1 LIMIT 1[0m
  [1m[35mFundSource Load (2.0ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 1 LIMIT 1
  [1m[36mPaymentAddress Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.5ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mFundSource Load (0.4ms)[0m  [1mSELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 4 LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 LIMIT 1
  [1m[36mPaymentAddress Load (0.5ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mPaymentAddress Exists (0.3ms)[0m  SELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 LIMIT 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 10 ORDER BY `payment_addresses`.`id` DESC LIMIT 1[0m
  [1m[35mFundSource Load (0.3ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 2 LIMIT 1
  [1m[36mPaymentAddress Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 15 LIMIT 1[0m
  [1m[35mFundSource Load (0.4ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`id` = 3 LIMIT 1
  [1m[36mPaymentAddress Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.4ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 20 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mPaymentAddress Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 LIMIT 1[0m
  [1m[35mPaymentAddress Load (0.7ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 21 ORDER BY `payment_addresses`.`id` DESC LIMIT 1
  [1m[36mWithdraw Load (1.4ms)[0m  [1mSELECT `withdraws`.* FROM `withdraws` WHERE `withdraws`.`member_id` = 1[0m
  [1m[35mFundSource Load (0.4ms)[0m  SELECT `fund_sources`.* FROM `fund_sources` WHERE `fund_sources`.`deleted_at` IS NULL AND `fund_sources`.`member_id` = 1
  Rendered private/funds/index.html.erb within layouts/funds (1.5ms)
  Rendered shared/_html5.html.slim (1.9ms)
  Rendered shared/_meta.html.slim (0.8ms)
  [1m[36mTicket Load (0.3ms)[0m  [1mSELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `tickets`.* FROM `tickets` WHERE `tickets`.`author_id` = 1 AND `tickets`.`aasm_state` = 'open'  [["author_id", 1]]
  Rendered shared/_header_profile_setting.html.slim (61.9ms)
  Rendered shared/_header_lang_sel.html.slim (0.2ms)
  Rendered shared/_header.html.slim (70.7ms)
  Rendered shared/_footer.html.slim (0.0ms)
Completed 200 OK in 1198ms (Views: 591.1ms | ActiveRecord: 136.5ms)


Started POST "/funds/gen_address" for 127.0.0.1 at 2018-07-18 17:45:37 -0700
Processing by Private::FundsController#gen_address as */*
  [1m[36mMember Load (0.5ms)[0m  [1mSELECT `members`.* FROM `members` WHERE `members`.`disabled` = 0 AND `members`.`id` = 1 ORDER BY `members`.`id` ASC LIMIT 1[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`member_id` = 1
  [1m[36mIdDocument Load (0.7ms)[0m  [1mSELECT `id_documents`.* FROM `id_documents` WHERE `id_documents`.`member_id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `two_factors` WHERE `two_factors`.`member_id` = 1 AND `two_factors`.`activated` = 1
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 2[0m
  [1m[35mPaymentAddress Load (0.3ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 3
  [1m[36mPaymentAddress Load (0.3ms)[0m  [1mSELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 16[0m
  [1m[35mPaymentAddress Load (0.6ms)[0m  SELECT `payment_addresses`.* FROM `payment_addresses` WHERE `payment_addresses`.`account_id` = 19
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.* FROM `accounts` WHERE `accounts`.`id` = 19 LIMIT 1[0m
Completed 500 Internal Server Error in 112ms

Bunny::TCPConnectionFailed - Could not establish TCP connection to 127.0.0.1:5672: :
  bunny (1.2.1) lib/bunny/transport.rb:247:in `rescue in initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:241:in `initialize_socket'
  bunny (1.2.1) lib/bunny/transport.rb:254:in `maybe_initialize_socket'
  bunny (1.2.1) lib/bunny/session.rb:245:in `start'
  app/models/amqp_queue.rb:6:in `block in connection'
  app/models/amqp_queue.rb:5:in `connection'
  app/models/amqp_queue.rb:11:in `channel'
  app/models/amqp_queue.rb:15:in `exchanges'
  app/models/amqp_queue.rb:19:in `exchange'
  app/models/amqp_queue.rb:24:in `publish'
  app/models/amqp_queue.rb:32:in `enqueue'
  app/models/payment_address.rb:16:in `gen_address'
  app/controllers/private/funds_controller.rb:31:in `block in gen_address'
  activerecord (4.0.12) lib/active_record/relation/delegation.rb:13:in `each'
  app/controllers/private/funds_controller.rb:23:in `gen_address'
  actionpack (4.0.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.12) lib/active_support/callbacks.rb:503:in `_run__2758449526018600109__process_action__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.12) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.0.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.0.12) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.12) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.12) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.12) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:676:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'
  omniauth-identity (1.1.1) lib/omniauth/strategies/identity.rb:43:in `other_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/app_request_handler.rb:13:in `call'
  rack-contrib (1.1.0) lib/rack/contrib/response_headers.rb:17:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/headers.rb:16:in `call'
  meta_request (0.2.8) lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
  http_accept_language (2.0.1) lib/http_accept_language/middleware.rb:13:in `call'
  simple_captcha2 (0.2.2) lib/simple_captcha/middleware.rb:20:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  activerecord (4.0.12) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'
  activerecord (4.0.12) lib/active_record/migration.rb:373:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.12) lib/active_support/callbacks.rb:373:in `_run__2986395647835554349__call__callbacks'
  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (1.1.0) lib/better_errors/middleware.rb:56:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.12) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.0.12) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'
  request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  lib/middleware/security.rb:11:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.12) lib/action_dispatch/middleware/static.rb:84:in `call'
  lib/middleware/i18n_js.rb:9:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.12) lib/rails/engine.rb:511:in `call'
  railties (4.0.12) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /usr/share/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'

